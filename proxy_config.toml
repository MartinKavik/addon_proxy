# -- Proxy config --
# See documentation for struct `ProxyConfig`.

reload_config_url_path = "/reload-proxy-config"
clear_cache_url_path = "/clear-cache"
status_url_path = "/status"
db_directory = "proxy_db"
ip = "0.0.0.0"
default_port = 5000
cache_enabled = false
default_cache_validity = 600  # 10 * 60
cache_stale_threshold_on_fail = 172_800 # 48 * 60 * 60
timeout = 20

[[routes]]
from = "stremio-addon-helloworld.dev"
to = "http://127.0.0.1:1337"
validate = false

[[routes]]
from = "stremio-addon-example.dev"
to = "http://127.0.0.1:1337"

[[routes]]
from = "127.0.0.1:5000/helloworld"
to = "http://127.0.0.1:1337"

[[routes]]
from = "127.0.0.1:5000/rust-addon"
to = "http://127.0.0.1:1337"

[[routes]]
from = "stremio-addon-proxy.herokuapp.com/helloworld"
to = "https://stremio-addon-helloworld.herokuapp.com"

[[routes]]
from = "stremio-addon-proxy.herokuapp.com/rust-addon"
to = "https://stremio-addon-example.herokuapp.com"

# Routes for experiments

[[routes]]
from = "example.com"
to = "http://localhost:8000"

[[routes]]
from = "sub.domain.com/my-addon"
to = "http://localhost:9999"
# sub.domain.com/my-addon/manifest.json => http://localhost:9999/manifest.json

[[routes]]
from = "my-domain.com"
to = "http://localhost:8080"

[[routes]]
from = "sub.domain.com"
to = "http://localhost:8080"

[[routes]]
from = "dont-validate.com"
to = "http://localhost:8080"
validate = false   # Note: allow /manifest.json ; bad_request on fail

